[settings]
experimental = true
color = false
yes = true
auto_install = true
quiet = true
go_skip_checksum = true

[settings.npm]
bun = true

[settings.pipx]
uvx = true

[settings.python]
uv_venv_auto = true
uv_venv_create_args = ["--system-site-packages", "--seed"]

[settings.cargo]
binstall = true

[tools]
lefthook = "latest"

[env]
NODE_ENV = "development"
NODE_SKIP_PLATFORM_CHECK = "1"
NODE_NO_WARNINGS = "1"
MISE_NPM_BUN = "1"
_.python.venv = { path = ".venv", create = true }
PYTHONOPTIMIZE = "2"
PYTHONDONTWRITEBYTECODE = "1"
PYTHONNODEBUGRANGES = "1"
PYTHONUTF8 = "1"
PYTHONIOENCODING = "UTF-8" 
UV_LINK_MODE = "hardlink"
DO_NOT_TRACK = "1"
CARGO_NET_GIT_FETCH_WITH_CLI = "true"
CARGO_HTTP_MULTIPLEXING = "true"
BINSTALL_DISABLE_TELEMETRY = "true"

[tasks.install]
description = "Install all dependencies"
run = "mise install && bun install"

[tasks.build]
description = "Build all lists"
run = "./Scripts/build-lists.sh"
depends = ["install"]

[tasks."build:all"]
description = "Build everything"
run = "./Scripts/build-all.sh all"
depends = ["install"]

[tasks.lint]
description = "Run all linters"
run = "bun run lint"

[tasks.format]
description = "Format all files"
run = "bun run format"

[tasks.validate]
description = "Validate everything"
run = "bun run validate"

[tasks.outdated]
description = "Check for outdated tools"
run = "mise outdated"

[tasks.upgrade]
description = "Upgrade all tools"
run = "mise up -y || :; mise prune -y || :"

[tasks.quality]
description = "Run JS/TS quality checks"
run = "./Scripts/quality-check.sh"
depends = ["install"]

[tasks."quality:ci"]
description = "Run quality checks in CI mode"
env = { CI = "true" }
run = "./Scripts/quality-check.sh"
depends = ["install"]

[tasks.uvcache]
description = "Clean cargo and cache directories"
run = "uv cache clear -q || :"
hide = true

[tasks.misecache]
description = "Clean mise cache"
run = "mise cache c -yq || :; mise prune -yq || :"
hide = true

[tasks.clean]
description = "Clean cache"
depends = ["uvcache", "misecache"]
run = "rm -rf ~/.cache/* || :"
