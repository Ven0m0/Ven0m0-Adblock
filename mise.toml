[tools]
"npm:@adguard/aglint" = "latest"
"npm:@adguard/dead-domains-linter" = "latest"
"npm:@adguard/hostlist-compiler" = "latest"
"npm:@biomejs/biome" = "latest"
"npm:oxlint" = "latest"
fd = "latest"

[env]
NODE_ENV = "development"
MISE_NPM_BUN = "1"

[tasks. install]
description = "Install all dependencies"
run = "mise install && bun install"

[tasks.build]
description = "Build all lists"
run = "./build-lists.sh"
depends = ["install"]

[tasks."build:all"]
description = "Build everything"
run = "./Scripts/build-all.sh all"
depends = ["install"]

[tasks.lint]
description = "Run all linters"
run = "bun run lint"

[tasks.format]
description = "Format all files"
run = "bun run format"

[tasks. validate]
description = "Validate everything"
run = "bun run validate"

[tasks.outdated]
description = "Check for outdated tools"
run = "mise outdated"

[tasks.upgrade]
description = "Upgrade all tools"
run = "mise upgrade"

[tasks.quality]
description = "Run JS/TS quality checks (Biome + Oxlint)"
run = "./Scripts/quality-check.sh"
depends = ["install"]

[tasks."quality:ci"]
description = "Run quality checks in CI mode"
env = { CI = "true" }
run = "./Scripts/quality-check.sh"
depends = ["install"]
